.inbox-page
  position absolute
  width 100%
  height 100%
  background-color white
  padding 10px
  border-left 1px solid rgba(221,221,221,0.6)
  display flex
  flex-direction column
  //align-items  center

  .focused
    background: rgba(91,139,255,0.3);

  .header-panel
    order 0
    padding 25px 30px 20px
    text-transform uppercase
    font-size 32px
    position relative
    display inline-block

    &:after
      content ''
      display block
      position absolute
      bottom 0
      left 0
      height 5px
      background linear-gradient(to right, $main-color, alpha($main-color, .1))
      width 100%

  .toolbar-container
    border-bottom 1px solid $border-color-divider
    padding 10px 5px
    display flex
    flex-direction row

  .content-panel
    order 1
    flex 1
    display flex
    flex-direction row
    padding 10px 0

  .column-panel
    flex 1 1 0%

    .list-category {
      cursor: default;
      
      .account-wrapper {
        display: flex;
      }
      .item {
        color: rgba(35, 31, 32, 0.8);
        flex: 1;
        display: flex;
        align-items: baseline;
        font-size: 14px;
        font-weight: 400;
        padding: 0 10px;
        line-height: 27.3px;
        clear: both;

        &:hover {
          background: rgba(91,139,255,0.1);
        }
      }
    }

    .list-thread {
      cursor: default;

      .thread-icon {
        width:25px;
        height:24px;
        flex-shrink:0;
        background-size: 15px;
        display:inline-block;
        background-repeat: no-repeat;
        background-position:center;

        &.thread-icon-attachment {
          background-image:url(icons/inbox/icon-attachment.png);
          margin-right:0;
          margin-left:0;
        }
        &.thread-icon-unread {
          background-image:url(icons/inbox/icon-unread.png);
        }
        &.thread-icon-replied {
          background-image:url(icons/inbox/icon-replied.png);
        }
        &.thread-icon-forwarded {
          background-image:url(icons/inbox/icon-forwarded.png);
        }
        &.thread-icon-star {
          background-size: 16px;
          background-image:url(icons/inbox/icon-star.png);
        }
        &.thread-icon-pencil {
          background-size: 16px;
          background-image:url(icons/inbox/icon-pencil.png);
        }
      }

      .item {
        color: rgba(35, 31, 32, 0.8);
        flex: 1;
        display: flex;
        align-items: center;
        font-size: $font-size;
        font-weight: 400;
        padding: 12px;
        line-height: 21px;
        clear: both;
        white-space: nowrap;
        border-bottom: 1px solid $border-color-primary;
        height: 85px;

        &:hover {
          background: rgba(91,139,255,0.1);
        }

        .thread-info-column {
          flex:1;
          overflow: hidden;

          .unread-true {
            font-weight: bold;
          }
          .participants-wrapper {
            display: flex;
            align-items: center;
            min-height: 24px;

            .participants {
              overflow: hidden;
              text-overflow: ellipsis;

              .unread {
                font-weight: $font-weight-semi-bold;
              }
            }

            .timestamp {
              font-size: $font-size-small;
              font-weight: $font-weight-normal;
              margin-right: 8px;
              opacity: 0.62;
            }
          }

          .subject {
            font-size: $font-size-small;
            font-weight: $font-weight-normal;
            overflow: hidden;
            text-overflow: ellipsis;
            text-align: left;
            margin-right: 8px;
            padding-right: $padding-base-horizontal;

            .unread {
              font-weight: $font-weight-semi-bold;
            }
          }

          .snippet {
            font-size: $font-size-small;
            font-weight: $font-weight-normal;
            overflow: hidden;
            text-overflow ellipsis;
            opacity: 0.7;
            text-align: left;
            min-height: 21px;
            margin-right: 4px;
            flex: 1;
          }
        }
      }
    }

    .list-message {
      $message-max-width  = 800px;
      $message-spacing    = 6px;


      display: flex;
      flex-direction: column;
      position: relative;
      background: $background-secondary;

      transition: all 125ms ease-in-out;
      width: 100%;
      min-height: 100%;
      padding: 10px 0;
      order: 2;

      search-match, .search-match {
        background: $text-color-search-match;
        border-radius: $border-radius-base;
        box-shadow: 0 0.5px 0.5px rgba(0,0,0,0.25);
        &.current-match {
          background: $text-color-search-current-match;
        }
      }

      .show-hidden-messages {
        background-color: darken($background-secondary, 4%);
        border: 1px solid darken($background-secondary, 8%);
        border-radius: $border-radius-base;
        color: $text-color-very-subtle;
        margin-bottom: $padding-large-vertical;
        cursor: default;
        padding: $padding-base-vertical $padding-base-horizontal;
        a { float: right; }
      }

      .message-body-error {
        background-color: $background-secondary;
        border: 1px solid darken($background-secondary, 8%);
        color: $text-color-very-subtle;
        margin-top: $padding-large-vertical;
        cursor: default;
        padding: $padding-base-vertical $padding-base-horizontal;
        a { float: right; }
      }

      .message-body-loading {
        height: 1em;
        align-content: center;
        margin-top: $padding-large-vertical;
        margin-bottom: $padding-large-vertical;
      }

      .message-subject-wrap {
        max-width: $message-max-width;
        margin: 5px auto 10px auto;
        -webkit-user-select: text;
        line-height: $font-size-large * 1.8;
        display: flex;
        align-items: center;
        padding: 0 $padding-base-horizontal;
      }
      .mail-important-icon {
        margin-right:$spacing-half;
        margin-bottom:1px;
        flex-shrink: 0;
      }
      .message-subject {
        font-size: $font-size-large;
        color: $text-color;
        margin-right: $spacing-standard;
      }
      .message-icons-wrap {
        flex-shrink: 0;
        cursor: pointer;
        -webkit-user-select: none;
        margin-left: auto;
        display: flex;
        align-items: center;

        img {
          background: $text-color-subtle;
        }
        div + div {
          margin-left: $padding-small-horizontal;
        }
      }
      .thread-injected-mail-labels {
        vertical-align: top;
      }
      .message-list-headers {
        margin: 0 auto;
        width: 100%;
        max-width: $message-max-width;
        display:block;

        .participants {
          .contact-chip {
            display:inline-block;
          }
        }
      }

      .messages-wrap {
        flex: 1;
        opacity:0;
        transition: opacity 0s;

        &.ready {
          opacity:1;
          transition: opacity .1s linear;
        }

        .scroll-region-content-inner {
          padding: 6px;
        }
      }

      .minified-bundle + .message-item-wrap {
        margin-top: -5px;
      }

      .message-item-wrap {
        transition: height 0.1s;
        position: relative;
        max-width: $message-max-width;
        width: 100%;
        margin: 0 auto;

        .message-item-white-wrap {
          background: $background-primary;
          border: 0;
          box-shadow: 0 0 0.5px rgba(0, 0, 0, 0.28), 0 1px 1.5px rgba(0, 0, 0, 0.08);
          border-radius: 4px;
        }

        padding-bottom: $message-spacing * 2;
        &.before-reply-area { padding-bottom: 0; }

        &.collapsed {
          .message-item-white-wrap {
            background-color: darken($background-primary, 2%);
            padding-top: 19px;
            padding-bottom: 8px;
            margin-bottom: 0;
          }

          &+.minified-bundle {
            margin-top: -$message-spacing
          }
        }

        &.collapsed .message-item-area {
          padding-bottom: 10px;
          display: flex;
          flex-direction: row;
          font-size: $font-size-small;

          .collapsed-snippet {
            flex: 1;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
            cursor: default;
            color: $text-color-very-subtle;
          }

          .collapsed-attachment {
            width:15px;
            height:15px;
            background-size: 15px;
            background-repeat: no-repeat;
            background-position:center;
            padding:12px;
            margin-left: 0.5em;
            background-image:url(../static/images/message-list/icon-attachment-@2x.png);
            position: relative;
            top: -2px;
          }

          .collapsed-from {
            font-weight: $font-weight-semi-bold;
            color: $text-color-very-subtle;
          // min-width: 60px;
            margin-right: 1em;
          }

          .collapsed-timestamp {
            margin-left: 0.5em;
            color: $text-color-very-subtle;
          }
        }

      }


      .message-item-divider {
        border:0; // remove default hr border left, right
        border-top: 2px solid $border-color-secondary;
        height: 3px;
        background: $background-secondary;
        border-bottom: 1px solid $border-color-primary;
        margin: 0;

        &.collapsed {
          height: 0;
          border-bottom: 0;
        }
      }

      .minified-bundle {
        position: relative;
        .num-messages {
          position: absolute;
          top: 50%;
          left: 50%;
          margin-left: -80px;
          margin-top: -15px;
          border-radius: 15px;
          border: 1px solid $border-color-divider;
          width: 160px;
          background: $background-primary;
          text-align: center;
          color: $text-color-very-subtle;
          z-index: 2;
          background: $background-primary;
          &:hover {
            cursor: default;
          }
        }
        .msg-lines {
          max-width: $message-max-width;
          margin: 0 auto;
          width: 100%;
          margin-top: -13px;
        }
        .msg-line {
          border-radius: 4px 4px 0 0;
          position: relative;
          border-top: 1px solid $border-color-divider;
          background-color: darken($background-primary, 2%);
          box-shadow: 0 0.5px 0 rgba(0,0,0,0.1), 0 -0.5px 0 rgba(0,0,0,0.1), 0.5px 0 0 rgba(0,0,0,0.1), -0.5px 0 0 rgba(0,0,0,0.1);
        }
      }

      .message-header {
        position: relative;
        font-size: $font-size-small;
        padding-bottom: 0;
        padding-top: 19px;
        line-height: 24px;
        border-bottom: 1px solid $border-color-divider;
        margin-bottom: 15px;

        &.pending {
          .message-actions-wrap {
            width: 0;
            opacity: 0;
            position: absolute;
          }
          .pending-spinner {
            opacity: 1;
          }
        }

        .pending-spinner {
          transition: opacity 100ms;
          transition-delay: 50ms, 0ms;
          transition-timing-function: ease-in;
          opacity: 0;
        }

        .header-row {
          margin-top: 0.5em;
          color: $text-color-very-subtle;

          .header-label {
            float: left;
            display: block;
            font-weight: $font-weight-normal;
            margin-left: 0;
          }

          .header-name {
          }
        }

        .message-actions-wrap {
          transition: opacity 100ms, width 150ms;
          transition-delay: 50ms, 0ms;
          transition-timing-function: ease-in-out;
          opacity: 1;
          text-align: left;
          margin-left: 10px;
        }

        .message-actions-ellipsis {
          display: block;
          float: left;
        }

        .message-actions {
          display: inline-block;
          height: 23px;
          border: 1px solid lighten($border-color-divider, 6%);
          border-radius: 11px;

          z-index: 4;
          margin-top: 0.35em;
          margin-left: 0.5em;
          text-align: center;

          .btn-icon {
            opacity: 0.75;
            padding: 0 $spacing-half;
            height: 20px;
            line-height: 10px;
            border-radius: 0;
            border-right: 1px solid lighten($border-color-divider, 6%);
            &:last-child { border-right: 0; }
            margin: 0;
            &:active {background: transparent;}
          }
        }

        .message-time {
          padding-top: 4px;
          z-index: 2; position: relative;
          display: inline-block;
          min-width: 125px;
          cursor: default;
        }
        .msg-actions-tooltip {
          display: inline-block;
          margin-left: 1em;
        }

        .message-time, .message-indicator {
          color: $text-color-very-subtle;
        }

        .message-header-right {
          z-index: 4;
          position: relative;
          top: -5px;
          float: right;
          text-align: right;
          display: flex;
          height: 2em;
        }

      }

      .message-item-area {
        width: 100%;
        max-width: $message-max-width;
        margin: 0 auto;
        padding: 0 20px $spacing-standard 20px;

        .iframe-container {
          margin-top: 10px;
          width: 100%;

          iframe {
            width: 100%;
            border: 0;
            padding: 0;
            overflow: auto;
          }
        }
      }

      .collapse-region {
        width: calc(~"100% - 30px");
        height: 56px;
        position: absolute;
        top: 0;
      }

      .header-toggle-control {
        &.inactive { display: none; }
        z-index: 3;
        position: absolute;
        top: 0;
        left: -1 * 13px;
        img { background: $text-color-very-subtle; }
      }
      .message-item-wrap:hover {
        .header-toggle-control.inactive { display: block; }
      }

      .footer-reply-area-wrap {
        overflow: hidden;

        max-width: $message-max-width;
        width: 100%;
        margin: -3px auto 0 auto;

        position: relative;
        z-index: 2;

        border: 0;
        box-shadow: 0 0 0.5px rgba(0, 0, 0, 0.28), 0 1px 1.5px rgba(0, 0, 0, 0.08);
        border-top: 1px dashed $border-color-divider;
        border-radius: 0 0 4px 4px;
        background: $background-primary;

        color: $text-color-very-subtle;
        img.content-mask { background-color:$text-color-very-subtle; }

        &:hover {
          cursor: default;
        }

        .footer-reply-area {
          width: 100%;
          max-width: $message-max-width;
          margin: 0 auto;
          padding: 12px $spacing-standard * 1.5;
        }
        .reply-text {
          display: inline-block;
          vertical-align: middle;
          margin-left: 0.5em;
        }
      }

    }

  .message-participants {
    z-index: 1;
    position: relative;
    display: flex;
    transition: padding-left 150ms;
    transition-timing-function: ease-in-out;

    &.collapsed:hover {cursor: default;}

    .from-contact {
      font-weight: $headings-font-weight;
      color: $text-color;
    }
    .from-label, .to-label, .cc-label, .bcc-label {
      color: $text-color-very-subtle;
    }
    .to-contact, .cc-contact, .bcc-contact, .to-everyone {
      color: $text-color-very-subtle;
    }

    &.to-participants {
      width: 100%;

      .collapsed-participants {
        width: 100%;
        margin-top: -6px;
      }
    }

    .collapsed-participants {
      display: flex;
      align-items: center;

      .to-contact {
        display: inline-block;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
    }

    .expanded-participants {
      position: relative;
      padding-right: 1.2em;
      width: 100%;

      .participant {
        display: inline-block;
        margin-right: 0.25em;
      }

      .participant-type {
        margin-top: 0.5em;
        &:first-child {margin-top: 0;}
      }

      .from-label, .to-label, .cc-label, .bcc-label {
        float: left;
        display: block;
        text-transform: capitalize;
        font-weight: $font-weight-normal;
        margin-left: 0;
      }

      .from-contact, .subject {
        font-weight: $font-weight-semi-bold;
      }

    // .from-label { margin-right: 1em; }
      .to-label, .cc-label { margin-right: 0.5em; }
      .bcc-label { margin-right: 0; }

      .participant-primary {
        color: $text-color-very-subtle;
        margin-right: 0.15em;
        display:inline-block;
      }
      .participant-secondary {
        color: $text-color-very-subtle;
        display:inline-block;
      }

      .from-contact {
        .participant-primary {
          color: $text-color;
        }
        .participant-secondary {
          color: $text-color;
        }
      }
    }
  }